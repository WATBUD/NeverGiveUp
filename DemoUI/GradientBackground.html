<body onmousemove="run(event)">
    x: <span id="x">
    </span>, y: <span id="y"></span>


    <div id="layerRange" class="layerRange">
        <div id="RGBcircle" class="circle">
        </div>
    </div>
</body>

<style type="text/css">
    body{

        display: block;
    margin: 0px;
     }
    .layerRange {
        position: absolute;
        /* background-image: linear-gradient(to right, red, yellow); */
        /* border: 5px solid #666; */
        background-color: red;
        width: 200px;
        height: 200px;
        left: 50%;
        /* border-radius: 50%; */
    }

    .circle {
        /* position: absolute;
        z-index: 9999; */
        /* position: absolute; */
        /* border: 2px solid blue; */
        background-color: yellow;
        width: 10%;
        height: 10%;
        /* border-radius: 50%; */
    }
</style>


<script>
    var RGBcircleEventArr = [];
    var mouseOn = true;
    var layerRange = document.getElementById("layerRange");
    //var circle = document.getElementById("circle");
    RGBcircleEventArr[0] = (e) => {
        if (e.buttons !== 1 || e.which !== 1) return;
        layerRange.addEventListener("mousemove", RGBcircleEventArr[1]);
        mouseOn = true;
        console.log("mousedown", mouseOn,e);
        var RGBcircle = document.getElementById("RGBcircle");
        RGBcircle.style.display = "block"
        RGBcircle.style.left = e.layerX - (RGBcircle.clientWidth / 2) + "px";
        RGBcircle.style.top = e.layerY - (RGBcircle.clientHeight / 2) + "px";

    }
    var RGBcircle = document.getElementById("RGBcircle");
    //layerRange.addEventListener("mousedown", RGBcircleEventArr[0]);

function run(event) {
    var demo_x = document.getElementById("x");
    var demo_y = document.getElementById("y");
    demo_x.innerHTML = event.layerX;
    demo_y.innerHTML = event.layerY;
}

    RGBcircleEventArr[1] = (e) => {
        console.log("mousemove",mouseOn,e);
        //if (mouseOn) {
        //if (!mouseOn) return;
        //clearEventBubble(e);
        var RGBcircle = document.getElementById("RGBcircle");
        RGBcircle.style.display = 'block'
        RGBcircle.style.left = e.layerX+ "px";
        // - (RGBcircle.clientWidth / 2) + "px";
        RGBcircle.style.top = e.layerY+ "px";
        // - (RGBcircle.clientHeight / 2) + "px";

    }


    layerRange.addEventListener("mousemove",(e) =>{
        console.log("mousemove",mouseOn,e);
        //if (mouseOn) {
        //if (!mouseOn) return;
        //clearEventBubble(e);
        //var RGBcircle = document.getElementById("RGBcircle");
        //RGBcircle.style.display = 'block'
        //RGBcircle.style.left = e.layerX+ "px";
        //- (RGBcircle.clientWidth / 2) + "px";
        //RGBcircle.style.top = e.layerY+ "px";
        if(e.layerX+RGBcircle.clientWidth<=layerRange.clientWidth+2&& e.layerY+RGBcircle.clientHeight<=layerRange.clientHeight+2){
        RGBcircle.style.marginLeft= e.layerX+ (RGBcircle.clientWidth / 2) + "px";
        RGBcircle.style.marginTop= e.layerY+ + (RGBcircle.clientHeight / 2) + "px";
        }
        // RGBcircle.style.paddingLeft= e.layerX+ "px";
        // RGBcircle.style.paddingTop= e.layerY+ "px";




    });
    
    layerRange.addEventListener("mouseleave",(e) =>{
        console.log("mouseleave",e);
    });
    
    RGBcircleEventArr[2] = (e) => {
        if (!mouseOn) return;
        //clearEventBubble(e);
        layerRange.removeEventListener("mousemove", RGBcircleEventArr[1]);
        //mouseOn=false;        
        console.log("mouseup", mouseOn);
    }
    //document.addEventListener("mouseup", RGBcircleEventArr[2]);




</script>