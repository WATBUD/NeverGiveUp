<!DOCTYPE html>
<html>
<style>
    body {
        margin: 0;
        padding: 0;
        background: -webkit-linear-gradient(left, #F00 0%, #FF0 16.66%, #0F0 33.33%, #0FF 50%, #00F 66.66%, #F0F 83.33%, #F00 100%);
    }
</style>

<head>
    <title>Example</title>
    <div id="ShowMessage">

    </div>
</head>

<body>
</body>
<script>
    var rAF = function () {
        console.log('rAF');
        return (
            window.requestAnimationFrame ||
            window.webkitRequestAnimationFrame ||
            function (callback) {
                window.setTimeout(callback, 1000 / 60);
            }
        );
    }();

    var frame = 0;
    var allFrameCount = 0;
    var lastTime = Date.now();
    var lastFameTime = Date.now();

    var loop = function () {
        console.log('loop');

        var now = Date.now();
        var fs = (now - lastFameTime);
        var fps = Math.round(1000 / fs);

        lastFameTime = now;
        // 不置 0，在动画的开头及结尾记录此值的差值算出 FPS
        allFrameCount++;
        frame++;

        if (now > 1000 + lastTime) {
            var fps = Math.round((frame * 1000) / (now - lastTime));
            console.log(`${new Date()} 1S内 FPS：`, fps);
            frame = 0;
            lastTime = now;
        };
        console.log('rAF(loop)');

        rAF(loop);
    }
    console.log('start');
    loop();
</script>

</html>